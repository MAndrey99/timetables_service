# Описание api
## методы

### post /deadlines
Создаёт новый дедлайн по переданному в теле запроса [**Deadline**](aboutApiObjects.md#deadline).
Возвращает созданный дедлайн с заполненными полями **id** и тд.

Коды ошибок:
- **417** - переданный в теле запроса [**Deadline**](aboutApiObjects.md#deadline) имеет неверный формат.


### patch /deadlines/`id`
Принимает [**DeadlinePatch**](aboutApiObjects.md#deadlinepatch) и изменяет соответствующие
поля у [**Deadline**](aboutApiObjects.md#deadline)
с соответствующим id. Этим методом нельзя менять значения полей на Null.
Возвращает обновленный [**Deadline**](aboutApiObjects.md#deadline).

Коды ошибок:
- **417** - переданный в теле запроса [**DeadlinePatch**](aboutApiObjects.md#deadlinepatch) имеет неверный формат.
- **404** - дедлайн с указанным id не найден.


### get /deadlines
Возвращает [**DeadlinesBucket**](aboutApiObjects.md#deadlinesbucket).  

Аргументы:

обозначение | обязательно | тип | пояснение
---|---|---|---
`relevant` | нет(по-умолчанию true) | bool | указывает, требуется ли из выдачи убирать неактуальные(прошедшие) дедлайны.
`groupId` | нет | int | фильтрации выдачи по соответствующему полю Deadline
`creatorId` | нет | int | фильтрации выдачи по соответствующему полю Deadline


### get /deadlines/`id`
Возвращает [**Deadline**](aboutApiObjects.md#deadline) по переданному в url id.

Аргументы:

обозначение | обязательно | тип | пояснение
---|---|---|---
`groupId` | нет | int | groupId для предотвращения получения дедлайнов из других групп

Коды ошибок:
- **404** - указанного дедлайна не существует
- **417** - groupId не соответствует указанному значению


### delete /deadlines/`id`
Удаляет дедлайн по переданному в url id.

Аргументы:

обозначение | обязательно | тип | пояснение
---|---|---|---
`groupId` | нет | int | groupId для предотвращения удаления дедлайнов из других групп

Коды ошибок:
- **204** - указанного дедлайна не существует
- **417** - groupId не соответствует указанному значению


### get /schedule
Возвращает [**DeadlinesBucket**](aboutApiObjects.md#deadlinesbucket) предстоящих дедлайнов
с корректировкой dateTime.

Корректировка заключается в уменьшении dateTime дедлайна так,
чтобы, при начинании выполнения задачи за leadTime до дедлайна, все задачи были выполнены.
Об алгоритмах планирования можно почитать [здесь](aboutPlanning.md).

Например:  
Есть 2 дедлайна через 2 часа. На выполнение каждого нужен час.  
Тогда один из дедлайнов будет перенесён на час раньше.

Аргументы:

обозначение | обязательно | тип | пояснение
---|---|---|---
`groupId` | да | int | группа, для которой составляется расписание
`algorithm` | нет | String | Алгоритм планирования. По умолчанию prioritySRTF.

Коды ошибок:
- **417** - успеть выполнить все задачи невозможно
- **422** - указанный алгоритм не поддерживается


### post /subscribers
Добавляет подписчика, которому будут присылаться все наступающие дедлайны
в [**DeadlinesBucket**](aboutApiObjects.md#deadlinesbucket).  
В теле запроса необходимо передать **url**, на который методом post будет отправляться.  
Пример **url**:
http://localhost:8080/

Коды ошибок:
- **409** - подписчик с указанным url уже существует
- **417** - подписчик не смог обработать тестовый запрос


### delete /subscribers
Удаляет подписчика.

Аргументы:

обозначение | обязательно | тип | пояснение
---|---|---|---
`url` | да | String | url подписчика, которого требуется удалить

Коды ошибок:
- **204** - указанного подписчика не существует
